# Social network for travelers
Проект по курсу [System Design](https://balun.courses/courses/system_design).

## Функциональные требования.
- Публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- Оценка и комментарии постов других путешественников;
- Подписка на других путешественников, чтобы следить за их активностью;
- Поиск популярных мест для путешествий и просмотр постов с этих мест в виде ТОПа мест по странам и городам;
- Общение с другими путешественниками в личных сообщениях;
- Просмотр ленты других путешественников;
  

## Нефункциональные требования.
- География пользования социальной сетью - СНГ
- Кол-во уникальных пользователей за 1 год ~= 10 000 000 пользователей
- DAU - 1 000 000 пользователей
- Доступность 99,95%
- Среднее кол-во запросов в день = 15
- Есть сезонность - летние и новогодние каникулы
- Данные храним всегда
- Максимальное кол-во подписок у пользователя = 1 000 000
- Письмо должно доходить до адресата за 3 сек
- Максимальный размер одной загружаемой фотографии = 15 МБ
- Максимальное кол-во прикрепляемых файлов = 4
- Максимальное кол-во символов в посте = 3000
- Среднее кол-во сообщений, отправляемых одним пользователем = 10
- Среднее кол-во символов в сообщении = 200 символов
- Среднее кол-во комментарий, оставляемых пользователем = 2
- Среднее кол-во символов в комментарии = 200

## Оценка нагрузки
Requests per seconds
```
RPS = DAU * avg_requests_per_day_by_user / 24 hours * 60 minutes * 60 seconds

RPS = 15 * 1 000 000 / 86 400 ~= 175 
```

Connections
```
Т.к. обычно принимают, что общее число одновременных пользователей онлайн составляет около 10% от DAU.

Connections = DAU * 0.1 = 1 000 000 * 0.1 = 100 000
```

Traffik
```
Чтобы рассчитать приблизительный усредненный траффик по RPS, используем формулу:

    Traffic = RPS * avg_request_size

В данном случае RPS = 175, рассчитаем avg_request_size:

- будем считать, что среднее кол-во фотографий, в каждом посте = 2, т.е. 2 * 15 Мб = 30 мб = 30 000 Кб
- также, будем считать, что среднее кол-во символов в посте = 1500, текст в кодировке utf-8, тогда 1500 * 8 = 12 000 бит ~= 2 кб
- размер сообщений: 10 сообщений * 200 символо * 8 бит = 16 000 бит ~= 2 Кб
- размер комментарий: 2 комментария * 200 символов ; 8 бит = 3200 бит ~= 0.4 кб

Итого: avg_request_size = 30 000 + 2 + 2 + 0.4 = 30 004.4

    Traffic = 175 * 30 004.4 = 5 250 770 Кб ~= 5 Гб
```